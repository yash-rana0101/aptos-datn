(()=>{var e={};e.id=902,e.ids=[902],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},80552:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),r(5222),r(81435),r(35866);var s=r(23191),a=r(88716),i=r(37922),l=r.n(i),d=r(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);r.d(t,n);let o=["",{children:["seller",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5222)),"C:\\Users\\premr\\OneDrive\\Documents\\Projects\\aptos-datn\\src\\app\\seller\\products\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,81435)),"C:\\Users\\premr\\OneDrive\\Documents\\Projects\\aptos-datn\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\premr\\OneDrive\\Documents\\Projects\\aptos-datn\\src\\app\\seller\\products\\page.tsx"],x="/seller/products/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/seller/products/page",pathname:"/seller/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},56417:(e,t,r)=>{Promise.resolve().then(r.bind(r,78725))},41291:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},78725:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(10326),a=r(17577),i=r(59939),l=r(31673),d=r(57969),n=r(77506),o=r(41291),c=r(94019);let x=(0,r(62881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function u(){let{isAuthenticated:e,isLoading:t}=(0,l.a)(),{account:r}=(0,d.Os)(),{data:u=[],isLoading:b}=(0,i.HY)(r?.address?.toString()),g=(0,i.gl)(),y=(0,i.vO)(),v=(0,i.HF)(),[j,f]=(0,a.useState)({title:"",price:"",description:"",quantity:"1",category:"",imageUrls:[]}),[N,w]=(0,a.useState)(null),[C,P]=(0,a.useState)(!1),[q,k]=(0,a.useState)(null),[D,U]=(0,a.useState)(!1),[A,S]=(0,a.useState)(""),_=()=>{A.trim()&&(f(e=>({...e,imageUrls:[...e.imageUrls,A.trim()]})),S(""))},M=e=>{f(t=>({...t,imageUrls:t.imageUrls.filter((t,r)=>r!==e)}))},E=async e=>{if(e.preventDefault(),!r)return;let t=parseFloat(j.price),s=parseInt(j.quantity);if(!(!j.title.trim()||isNaN(t)||t<=0||isNaN(s))&&!(s<1)){U(!0);try{await g.mutateAsync({title:j.title.trim(),description:j.description.trim(),price:Math.floor(1e8*t),quantity:s,imageUrls:j.imageUrls.filter(e=>e.trim()),category:j.category.trim()||"General"}),f({title:"",price:"",description:"",quantity:"1",category:"",imageUrls:[]})}finally{U(!1)}}},Z=(0,a.useMemo)(()=>({totalProducts:u.length,totalQuantity:0,totalValue:0}),[u]);return t||b?s.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:s.jsx(n.Z,{className:"w-12 h-12 text-[#C6D870] animate-spin"})}):s.jsx("div",{className:"min-h-screen bg-black py-8 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Manage Products"}),s.jsx("p",{className:"text-gray-400",children:"Create and manage your product listings on the blockchain"})]}),s.jsx("div",{className:"mb-6 p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(o.Z,{className:"w-5 h-5 text-blue-400 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-blue-400",children:[s.jsx("strong",{children:"Note:"})," This blockchain version uses image URLs. Upload your images to IPFS/Arweave first."]})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 p-6 rounded-lg border border-gray-700 bg-[#0b0b0b]/60",children:[s.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Create Product"}),(0,s.jsxs)("form",{onSubmit:E,className:"flex flex-col gap-4",children:[s.jsx("div",{children:s.jsx("input",{value:j.title,onChange:e=>f({...j,title:e.target.value}),placeholder:"Product title",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("input",{value:j.price,onChange:e=>f({...j,price:e.target.value}),placeholder:"Price (APT)",type:"number",step:"0.0001",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"}),s.jsx("input",{value:j.quantity,onChange:e=>f({...j,quantity:e.target.value}),placeholder:"Qty",type:"number",min:"1",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"})]}),s.jsx("input",{value:j.category,onChange:e=>f({...j,category:e.target.value}),placeholder:"Category",className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"}),s.jsx("textarea",{value:j.description,onChange:e=>f({...j,description:e.target.value}),placeholder:"Description",className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6 h-24 resize-none"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{value:A,onChange:e=>S(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),_()),placeholder:"Image URL",className:"flex-1 px-4 py-2 rounded-xl bg-white/4 text-white border border-white/6 text-sm"}),s.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 bg-[#C6D870] text-black rounded-lg text-sm font-semibold",children:"Add"})]}),j.imageUrls.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-white/5 border border-white/6",children:[s.jsx("span",{className:"flex-1 text-xs text-gray-300 truncate",children:e}),s.jsx("button",{type:"button",onClick:()=>M(t),className:"text-red-400",children:s.jsx(c.Z,{className:"w-4 h-4"})})]},t))]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-white/3 border border-white/6 text-center",children:[s.jsx("div",{className:"text-xs text-gray-300",children:"Items"}),s.jsx("div",{className:"text-lg font-bold text-white",children:Z.totalProducts})]}),(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-white/3 border border-white/6 text-center",children:[s.jsx("div",{className:"text-xs text-gray-300",children:"Qty"}),s.jsx("div",{className:"text-lg font-bold text-white",children:Z.totalQuantity})]}),(0,s.jsxs)("div",{className:"p-3 rounded-xl bg-white/3 border border-white/6 text-center",children:[s.jsx("div",{className:"text-xs text-gray-300",children:"Value"}),(0,s.jsxs)("div",{className:"text-lg font-bold text-white",children:[Z.totalValue," APT"]})]})]}),s.jsx("button",{type:"submit",disabled:D||g.isPending,className:"px-6 py-3 rounded-2xl bg-linear-to-r from-[#C6D870] to-[#B5C760] text-black font-semibold disabled:opacity-50",children:D?"Creating...":"Create Product"})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 p-6 rounded-lg border border-gray-700 bg-[#0b0b0b]/60",children:[s.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Your Products"}),b?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(n.Z,{className:"w-8 h-8 text-[#C6D870] animate-spin"})}):0===u.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx(x,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-400",children:"No products yet!"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>s.jsx(p,{productAddress:e,onEdit:()=>{w(e),P(!0)},onDelete:()=>k(e)},e))})]})]}),C&&N&&s.jsx(m,{productAddress:N,onClose:()=>{P(!1),w(null)},updateMutation:y}),q&&s.jsx(h,{productAddress:q,onClose:()=>k(null),deleteMutation:v})]})})}function p({productAddress:e,onEdit:t,onDelete:r}){let{data:a,isLoading:l}=(0,i.iB)(e);return l?s.jsx("div",{className:"p-4 rounded-xl border border-gray-800 bg-[#0b0b0b] flex items-center justify-center h-64",children:s.jsx(n.Z,{className:"w-8 h-8 text-[#C6D870] animate-spin"})}):a?(0,s.jsxs)("div",{className:"p-4 rounded-xl border border-gray-800 bg-linear-to-br from-[#0b0b0b] via-[#0b0b0b] to-[#1a1a1a] flex flex-col backdrop-blur-sm hover:border-[#C6D870]/30 transition-all",children:[(0,s.jsxs)("div",{className:"h-48 w-full bg-gray-900 rounded-lg overflow-hidden flex items-center justify-center relative",children:[a.imageUrls&&a.imageUrls.length>0?s.jsx("img",{src:a.imageUrls[0],alt:a.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"text-gray-600",children:"No image"}),s.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold ${a.isAvailable?"bg-green-500/80":"bg-red-500/80"} text-white`,children:a.isAvailable?"Available":"Unavailable"})]}),(0,s.jsxs)("div",{className:"mt-4 flex-1 space-y-2",children:[s.jsx("div",{className:"text-white font-semibold text-lg",children:a.title}),s.jsx("div",{className:"text-xs text-gray-400 uppercase",children:a.category}),a.description&&s.jsx("p",{className:"text-sm text-gray-300 line-clamp-2",children:a.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,s.jsxs)("div",{className:"text-lg text-[#C6D870] font-bold",children:[(a.price/1e8).toFixed(4)," APT"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Qty: ",s.jsx("span",{className:"text-white font-semibold",children:a.quantity})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Sold: ",a.soldQuantity," units"]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[s.jsx("button",{onClick:t,className:"flex-1 px-3 py-2 text-sm border border-[#C6D870] text-[#C6D870] rounded-lg hover:bg-[#C6D870]/10",children:"Edit"}),s.jsx("button",{onClick:r,className:"flex-1 px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}):s.jsx("div",{className:"p-4 rounded-xl border border-gray-800 bg-[#0b0b0b]",children:(0,s.jsxs)("p",{className:"text-gray-400 text-sm",children:["Product #",e.slice(0,8),"..."]})})}function m({productAddress:e,onClose:t,updateMutation:r}){let{data:l}=(0,i.iB)(e),[d,n]=(0,a.useState)({title:"",price:"",description:"",category:"",imageUrls:[]}),o=async s=>{s.preventDefault();let a=parseFloat(d.price);if(!isNaN(a)&&!(a<=0))try{await r.mutateAsync({productAddress:e,title:d.title.trim(),description:d.description.trim(),price:Math.floor(1e8*a),imageUrls:d.imageUrls,category:d.category.trim()}),t()}catch(e){console.error(e)}};return l?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-[#0b0b0b] border border-gray-800 rounded-2xl p-6 w-full max-w-2xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Edit Product"}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl"})]}),(0,s.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[s.jsx("input",{value:d.title,onChange:e=>n({...d,title:e.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6",placeholder:"Title"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("input",{type:"number",step:"0.0001",value:d.price,onChange:e=>n({...d,price:e.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6",placeholder:"Price"}),s.jsx("input",{value:d.category,onChange:e=>n({...d,category:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6",placeholder:"Category"})]}),s.jsx("textarea",{value:d.description,onChange:e=>n({...d,description:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6 h-28 resize-none",placeholder:"Description"}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-6 py-3 rounded-xl border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:r.isPending,className:"flex-1 px-6 py-3 rounded-xl bg-linear-to-r from-[#C6D870] to-[#B5C760] text-black font-semibold disabled:opacity-50",children:r.isPending?"Saving...":"Save Changes"})]})]})]})}):null}function h({productAddress:e,onClose:t,deleteMutation:r}){let{data:a}=(0,i.iB)(e),l=async()=>{try{await r.mutateAsync(e),t()}catch(e){console.error(e)}};return s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-[#0b0b0b] border border-gray-800 rounded-2xl p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Confirm Delete"}),(0,s.jsxs)("p",{className:"text-gray-300 mb-6",children:["Delete ",s.jsx("span",{className:"text-[#C6D870] font-semibold",children:a?.title||`#${e.slice(0,8)}...`}),"?"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"flex-1 px-6 py-3 rounded-xl border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Cancel"}),s.jsx("button",{onClick:l,disabled:r.isPending,className:"flex-1 px-6 py-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 disabled:opacity-50",children:r.isPending?"Deleting...":"Delete"})]})]})})}},5222:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Users\premr\OneDrive\Documents\Projects\aptos-datn\src\app\seller\products\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,730,621,216,904],()=>r(80552));module.exports=s})();