"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@telegram-apps";
exports.ids = ["vendor-chunks/@telegram-apps"];
exports.modules = {

/***/ "(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@telegram-apps/bridge/dist/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $debug: () => (/* binding */ ae),\n/* harmony export */   $targetOrigin: () => (/* binding */ ue),\n/* harmony export */   CancelablePromise: () => (/* binding */ w),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ re),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ ne),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ Ke),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ He),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ Je),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ Be),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ oe),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ Ge),\n/* harmony export */   EnhancedPromise: () => (/* binding */ S),\n/* harmony export */   TypedError: () => (/* binding */ b),\n/* harmony export */   addEventListener: () => (/* binding */ te),\n/* harmony export */   camelToKebab: () => (/* binding */ ct),\n/* harmony export */   camelToSnake: () => (/* binding */ it),\n/* harmony export */   captureSameReq: () => (/* binding */ et),\n/* harmony export */   compareVersions: () => (/* binding */ tt),\n/* harmony export */   createAbortError: () => (/* binding */ M),\n/* harmony export */   createCbCollector: () => (/* binding */ k),\n/* harmony export */   createLogger: () => (/* binding */ ke),\n/* harmony export */   createPostEvent: () => (/* binding */ dt),\n/* harmony export */   createTypedErrorPredicate: () => (/* binding */ L),\n/* harmony export */   defineEventHandlers: () => (/* binding */ bt),\n/* harmony export */   deleteCssVar: () => (/* binding */ ft),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ x),\n/* harmony export */   getStorageValue: () => (/* binding */ xe),\n/* harmony export */   hasWebviewProxy: () => (/* binding */ Q),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ Et),\n/* harmony export */   isAbortError: () => (/* binding */ ot),\n/* harmony export */   isCanceledError: () => (/* binding */ st),\n/* harmony export */   isIframe: () => (/* binding */ Ne),\n/* harmony export */   isTMA: () => (/* binding */ _t),\n/* harmony export */   isTimeoutError: () => (/* binding */ nt),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ lt),\n/* harmony export */   off: () => (/* binding */ wt),\n/* harmony export */   on: () => (/* binding */ Fe),\n/* harmony export */   postEvent: () => (/* binding */ pe),\n/* harmony export */   removeEventHandlers: () => (/* binding */ gt),\n/* harmony export */   request: () => (/* binding */ fe),\n/* harmony export */   resetPackageState: () => (/* binding */ yt),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ Ye),\n/* harmony export */   setCssVar: () => (/* binding */ pt),\n/* harmony export */   setStorageValue: () => (/* binding */ We),\n/* harmony export */   sleep: () => (/* binding */ at),\n/* harmony export */   snakeToCamel: () => (/* binding */ ut),\n/* harmony export */   subscribe: () => (/* binding */ ht),\n/* harmony export */   supports: () => (/* binding */ H),\n/* harmony export */   unsubscribe: () => (/* binding */ mt)\n/* harmony export */ });\nclass d extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, d.prototype);\n  }\n}\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", me = \"ERR_UNEXPECTED_VALUE\", de = \"ERR_UNEXPECTED_TYPE\", K = \"ERR_PARSE\";\nfunction V(e, t) {\n  const r = {};\n  for (const n in e) {\n    const o = e[n];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = n, a = o) : [s, a] = o;\n    try {\n      const c = a(t(s));\n      c !== void 0 && (r[n] = c);\n    } catch (c) {\n      throw new d(\n        K,\n        `Parser for \"${n}\" property failed${s === n ? \"\" : `. Source field: \"${s}\"`}`,\n        c\n      );\n    }\n  }\n  return r;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (r) {\n      throw new d(he, { cause: r });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new d(me);\n  return t;\n}\nfunction g(e, t) {\n  return (r) => {\n    const n = (o) => {\n      if (!(r && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new d(K, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      n,\n      {\n        isValid(o) {\n          try {\n            return n(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction l(e, t) {\n  return g(t || \"object\", (r) => {\n    const n = Z(r);\n    return V(e, (o) => n[o]);\n  });\n}\nfunction R(e) {\n  throw new d(de, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), _ = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (r) => {\n    typeof r != \"string\" && !(r instanceof URLSearchParams) && R(r);\n    const n = typeof r == \"string\" ? new URLSearchParams(r) : r;\n    return V(e, (o) => {\n      const s = n.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction j(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), r = P(!0), n = _(), o = _(!0), s = $(!0), a = l(j({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: n,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    j({\n      authDate: Ee(),\n      canSendAfter: r,\n      chat: l(\n        j({\n          id: t,\n          type: n,\n          title: n,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: n,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      signature: n,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let n = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      n += t[1 + o].repeat(2);\n    return n;\n  }\n  const r = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!r)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return r.slice(1).reduce((n, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return n + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(_()(e))), I = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((r, [n, o]) => (r[we(n)] = t(o), r), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction W(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, r]) => [G(t), r])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = _(), r = _(!0), n = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", n],\n    defaultColors: [\"tgWebAppDefaultColors\", I(!0)],\n    fullscreen: [\"tgWebAppFullscreen\", n],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", r],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", n],\n    startParam: [\"tgWebAppStartParam\", r],\n    themeParams: [\"tgWebAppThemeParams\", I()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction Se(e) {\n  const {\n    initDataRaw: t,\n    startParam: r,\n    showSettings: n,\n    botInline: o,\n    fullscreen: s,\n    defaultColors: a\n  } = e, c = new URLSearchParams();\n  return c.set(\"tgWebAppPlatform\", e.platform), c.set(\"tgWebAppThemeParams\", /* @__PURE__ */ W(e.themeParams)), c.set(\"tgWebAppVersion\", e.version), t && c.set(\"tgWebAppData\", t), r && c.set(\"tgWebAppStartParam\", r), typeof n == \"boolean\" && c.set(\"tgWebAppShowSettings\", n ? \"1\" : \"0\"), typeof o == \"boolean\" && c.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), typeof s == \"boolean\" && c.set(\"tgWebAppFullscreen\", s ? \"1\" : \"0\"), a && c.set(\"tgWebAppDefaultColors\", /* @__PURE__ */ W(a)), c.toString();\n}\nconst X = l({\n  eventType: _(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Y = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction $e(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = l({\n  TelegramWebviewProxy: l({ postEvent: Y() })()\n});\nfunction Q(e) {\n  return Ce().isValid(e);\n}\nfunction Ne() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar De = Object.defineProperty, je = (e, t, r) => t in e ? De(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r, ee = (e, t, r) => je(e, typeof t != \"symbol\" ? t + \"\" : t, r);\nclass b extends Error {\n  constructor(t, r, n) {\n    super(\n      typeof r == \"object\" ? r.message : r || t,\n      {\n        cause: typeof r == \"object\" ? r.cause : n\n      }\n    ), this.type = t, this.name = \"TypedError\", Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction te(e, t, r) {\n  return e.addEventListener(t, r), () => e.removeEventListener(t, r);\n}\nfunction k(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((r) => {\n        r();\n      });\n    }\n  ];\n}\nfunction Ue(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction L(e) {\n  return (t) => Ue(t, e);\n}\nconst re = \"ERR_ABORTED\", ne = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(re, { cause: e });\n}\nconst nt = L(oe), ot = L(re), st = L(ne);\nfunction F(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s, a;\n    super((c, i) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return i(M(u.reason));\n      const [f, h] = k(), m = (E) => (...ge) => (h(), E(...ge)), T = new AbortController(), { signal: A } = T;\n      a = m((E) => {\n        T.abort(E), i(E);\n      }), s = m(c), u && f(\n        te(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const E = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(E);\n        });\n      }\n      n && n(s, a, A);\n    }), ee(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new w((n, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(n, o) : n(a);\n      } catch (a) {\n        o(a);\n      }\n    }, r);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(ne));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return F(super.then(t, r), this);\n  }\n}\nfunction J(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass S extends w {\n  constructor(t, r) {\n    let n, o;\n    typeof t == \"function\" ? (n = t, o = r) : o = t;\n    let s;\n    super((a, c, i) => {\n      s = a, n && n(a, c, i);\n    }, o), ee(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, r) {\n    return new S(\n      (n, o, s) => w.withFn(t, { abortSignal: s }).then(n, o),\n      r\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new S((r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new S((r, n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return J(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, r) {\n    return J(super.then(t, r), this);\n  }\n}\nfunction at(e, t) {\n  return new w((r) => {\n    setTimeout(r, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction We(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction xe(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction it(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction ke(e, t) {\n  t || (t = {});\n  const {\n    textColor: r,\n    bgColor: n,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...c) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const i = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${i};background-color: lightblue;color:black`,\n      \"\",\n      `${i};${r ? `color:${r};` : \"\"}${n ? `background-color:${n}` : \"\"}`,\n      ...c\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction pt(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction ft(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction Le(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction y(e, t) {\n  t || (t = {});\n  const r = t.equals || Object.is;\n  let n = [], o = e;\n  const s = (u) => {\n    if (!r(o, u)) {\n      const f = o;\n      o = u, Le(i, () => {\n        [...n].forEach(([h, m]) => {\n          h(u, f), m && c(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const c = (u, f) => {\n    const h = a(f), m = n.findIndex(([T, A]) => T === u && A.once === h.once && A.signal === h.signal);\n    m >= 0 && n.splice(m, 1);\n  }, i = Object.assign(\n    function() {\n      return Oe(i), o;\n    },\n    {\n      destroy() {\n        n = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return n.push([u, a(f)]), () => c(u, f);\n      },\n      unsub: c,\n      unsubAll() {\n        n = n.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return i;\n}\nconst U = [];\nfunction Oe(e) {\n  U.length && U[U.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ y(!1), [O, qe] = /* @__PURE__ */ ke(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), Ie = {\n  clipboard_text_received: l({\n    req_id: _(),\n    data: (e) => e === null ? e : _(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: l({\n    req_id: _(),\n    result: (e) => e,\n    error: _(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? l({\n    button_id: (t) => t == null ? void 0 : _()(t)\n  })()(e) : {}),\n  viewport_changed: l({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Me(e) {\n  const t = window, [, r] = k(\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    te(t, \"message\", (n) => {\n      if (n.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = X()(n.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, c = Ie[s];\n      try {\n        const i = c ? c()(a) : a;\n        O(\"Event received:\", i ? { eventType: s, eventData: i } : { eventType: s }), e([s, i]);\n      } catch (i) {\n        qe(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          i\n        );\n      }\n    })\n  );\n  return r;\n}\nconst C = /* @__PURE__ */ y(), N = /* @__PURE__ */ y();\nfunction ce() {\n  return N() || N.set(Me(C.set)), C;\n}\nconst v = /* @__PURE__ */ y({});\nfunction ie(e) {\n  let t = v()[e];\n  return t || (t = /* @__PURE__ */ y(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ce().sub((r) => {\n    r && r[0] === e && t.set(r[1]);\n  }), v.set({ ...v(), [e]: t })), t;\n}\nfunction Fe(e, t, r) {\n  return ie(e).sub(t, r);\n}\nconst Je = \"ERR_METHOD_UNSUPPORTED\", Be = \"ERR_RETRIEVE_LP_FAILED\", He = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ge = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ y(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  O(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const r = window;\n  if (Q(r)) {\n    r.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const n = JSON.stringify({ eventType: e, eventData: t });\n  if (Ne())\n    return r.parent.postMessage(n, ue());\n  const { external: o } = r;\n  if (l({ notify: Y() })().isValid(o)) {\n    o.notify(n);\n    return;\n  }\n  throw new b(Ge);\n}\nfunction fe(e, t, r) {\n  r || (r = {});\n  const { capture: n } = r, [o, s] = k();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((c) => {\n      o(\n        Fe(c, (i) => {\n          (!n || (Array.isArray(t) ? n({\n            event: c,\n            payload: i\n          }) : n(i))) && a(i);\n        })\n      );\n    }), (r.postEvent || pe)(e, r.params);\n  }, r).finally(s);\n}\nfunction q(e) {\n  return Ae()(e);\n}\nfunction _e(e) {\n  return q(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ve() {\n  return _e(window.location.href);\n}\nfunction Ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return _e(e.name);\n}\nconst ze = \"launchParams\";\nfunction Xe() {\n  return q(xe(ze) || \"\");\n}\nfunction le(e) {\n  We(\"launchParams\", /* @__PURE__ */ Se(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Ye() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ve,\n    // Then, try using the lower level API - window.performance.\n    Ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Xe\n  ])\n    try {\n      const r = t();\n      return le(r), r;\n    } catch (r) {\n      e.push(r);\n    }\n  throw new b(Be, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"ðŸ“– Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `â€” ${be(t)}`)\n  ].join(`\n`));\n}\nfunction _t(e) {\n  if (e === \"simple\")\n    try {\n      return Ye(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (Q(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction x(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction Qe(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: r } = X()(t);\n      r === \"web_app_request_theme\" && x(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ W(e))\n      }), r === \"web_app_request_viewport\" && x(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction lt(e) {\n  var n;\n  const t = typeof e == \"string\" ? q(e) : e;\n  le(t);\n  const r = (n = window.TelegramWebviewProxy) == null ? void 0 : n.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      Qe(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), r == null || r(o, s);\n    }\n  }, O(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction bt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((r, n, o) => {\n      if (n === o.length - 1) {\n        t[r] = x;\n        return;\n      }\n      r in t || (t[r] = {}), t = t[r];\n    });\n  });\n}\nfunction gt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction wt(e, t, r) {\n  ie(e).unsub(t, r);\n}\nfunction ht(e, t) {\n  return ce().sub(e, t);\n}\nfunction mt(e, t) {\n  C.unsub(e, t);\n}\nfunction et(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction B(e) {\n  return e.split(\".\").map(Number);\n}\nfunction tt(e, t) {\n  const r = B(e), n = B(t), o = Math.max(r.length, n.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = r[s] || 0, c = n[s] || 0;\n    if (a !== c)\n      return a > c ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return tt(e, t) <= 0;\n}\nfunction H(e, t, r) {\n  if (typeof r == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", r);\n      if (t === \"try_browser\")\n        return p(\"7.6\", r);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", r);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", r);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", r);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_share_to_story\":\n      return p(\"7.8\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    case \"web_app_request_safe_area\":\n    case \"web_app_request_content_safe_area\":\n    case \"web_app_request_fullscreen\":\n    case \"web_app_exit_fullscreen\":\n    case \"web_app_set_emoji_status\":\n    case \"web_app_add_to_home_screen\":\n    case \"web_app_check_home_screen\":\n    case \"web_app_request_emoji_status_access\":\n      return p(\"8.0\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction dt(e, t) {\n  t || (t = \"strict\");\n  const r = typeof t == \"function\" ? t : (n) => {\n    const { method: o, version: s } = n;\n    let a, c;\n    if (\"param\" in n ? (a = `Parameter \"${n.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, c = He) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, c = Je), t === \"strict\")\n      throw new b(c, a);\n    return console.warn(a);\n  };\n  return (n, o) => H(n, e) ? $e(o) && n === \"web_app_set_header_color\" && \"color\" in o && !H(n, \"color\", e) ? r({ version: e, method: n, param: \"color\" }) : pe(n, o) : r({ version: e, method: n });\n}\nfunction Et(e, t, r, n) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...n || {},\n    params: { method: e, params: t, req_id: r },\n    capture: et(r)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction yt() {\n  var e;\n  (e = N()) == null || e(), [\n    ...Object.values(v()),\n    v,\n    C,\n    N,\n    ue,\n    ae\n  ].forEach(rt);\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvYnJpZGdlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSx1QkFBdUIsRUFBRSxtQkFBbUIsbUNBQW1DLEVBQUUsR0FBRztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHdCQUF3QixVQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSx5QkFBeUIsRUFBRTtBQUMzQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxrQkFBa0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0EsMENBQTBDLFFBQVEsUUFBUSxFQUFFLCtDQUErQyxFQUFFLDZCQUE2QixFQUFFLHdDQUF3QyxFQUFFO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBLGtIQUFrSCx1Q0FBdUMsbUJBQW1CLHVCQUF1QjtBQUNuTTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsY0FBYyxpQ0FBaUM7QUFDL0M7QUFDQSxHQUFHLFVBQVUscUJBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFtREU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1c3RvbS1pbmRleGVyLXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzL0B0ZWxlZ3JhbS1hcHBzL2JyaWRnZS9kaXN0L2luZGV4LmpzP2I1Y2YiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgZCBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IodCwgciwgbikge1xuICAgIHN1cGVyKFxuICAgICAgdHlwZW9mIHIgPT0gXCJvYmplY3RcIiA/IHIubWVzc2FnZSA6IHIgfHwgdCxcbiAgICAgIHtcbiAgICAgICAgY2F1c2U6IHR5cGVvZiByID09IFwib2JqZWN0XCIgPyByLmNhdXNlIDogblxuICAgICAgfVxuICAgICksIHRoaXMudHlwZSA9IHQsIHRoaXMubmFtZSA9IFwiVHlwZWRFcnJvclwiLCBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgZC5wcm90b3R5cGUpO1xuICB9XG59XG5mdW5jdGlvbiBHKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGBfJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiB3ZShlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL19bYS16XS9nLCAodCkgPT4gdFsxXS50b1VwcGVyQ2FzZSgpKTtcbn1cbmNvbnN0IGhlID0gXCJFUlJfSU5WQUxJRF9WQUxVRVwiLCBtZSA9IFwiRVJSX1VORVhQRUNURURfVkFMVUVcIiwgZGUgPSBcIkVSUl9VTkVYUEVDVEVEX1RZUEVcIiwgSyA9IFwiRVJSX1BBUlNFXCI7XG5mdW5jdGlvbiBWKGUsIHQpIHtcbiAgY29uc3QgciA9IHt9O1xuICBmb3IgKGNvbnN0IG4gaW4gZSkge1xuICAgIGNvbnN0IG8gPSBlW25dO1xuICAgIGlmICghbylcbiAgICAgIGNvbnRpbnVlO1xuICAgIGxldCBzLCBhO1xuICAgIHR5cGVvZiBvID09IFwiZnVuY3Rpb25cIiA/IChzID0gbiwgYSA9IG8pIDogW3MsIGFdID0gbztcbiAgICB0cnkge1xuICAgICAgY29uc3QgYyA9IGEodChzKSk7XG4gICAgICBjICE9PSB2b2lkIDAgJiYgKHJbbl0gPSBjKTtcbiAgICB9IGNhdGNoIChjKSB7XG4gICAgICB0aHJvdyBuZXcgZChcbiAgICAgICAgSyxcbiAgICAgICAgYFBhcnNlciBmb3IgXCIke259XCIgcHJvcGVydHkgZmFpbGVkJHtzID09PSBuID8gXCJcIiA6IGAuIFNvdXJjZSBmaWVsZDogXCIke3N9XCJgfWAsXG4gICAgICAgIGNcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiByO1xufVxuZnVuY3Rpb24gWihlKSB7XG4gIGxldCB0ID0gZTtcbiAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgdHJ5IHtcbiAgICAgIHQgPSBKU09OLnBhcnNlKHQpO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIHRocm93IG5ldyBkKGhlLCB7IGNhdXNlOiByIH0pO1xuICAgIH1cbiAgaWYgKHR5cGVvZiB0ICE9IFwib2JqZWN0XCIgfHwgIXQgfHwgQXJyYXkuaXNBcnJheSh0KSlcbiAgICB0aHJvdyBuZXcgZChtZSk7XG4gIHJldHVybiB0O1xufVxuZnVuY3Rpb24gZyhlLCB0KSB7XG4gIHJldHVybiAocikgPT4ge1xuICAgIGNvbnN0IG4gPSAobykgPT4ge1xuICAgICAgaWYgKCEociAmJiBvID09PSB2b2lkIDApKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB0KG8pO1xuICAgICAgICB9IGNhdGNoIChzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IGQoSywge1xuICAgICAgICAgICAgbWVzc2FnZTogYFwiJHtlfVwiIHRyYW5zZm9ybWVyIGZhaWxlZCB0byBwYXJzZSB0aGUgdmFsdWVgLFxuICAgICAgICAgICAgY2F1c2U6IHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuYXNzaWduKFxuICAgICAgbixcbiAgICAgIHtcbiAgICAgICAgaXNWYWxpZChvKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuKG8pLCAhMDtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xufVxuZnVuY3Rpb24gbChlLCB0KSB7XG4gIHJldHVybiBnKHQgfHwgXCJvYmplY3RcIiwgKHIpID0+IHtcbiAgICBjb25zdCBuID0gWihyKTtcbiAgICByZXR1cm4gVihlLCAobykgPT4gbltvXSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gUihlKSB7XG4gIHRocm93IG5ldyBkKGRlLCBgVW5leHBlY3RlZCB2YWx1ZSByZWNlaXZlZDogJHtKU09OLnN0cmluZ2lmeShlKX1gKTtcbn1cbmNvbnN0ICQgPSBnKFwiYm9vbGVhblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJib29sZWFuXCIpXG4gICAgcmV0dXJuIGU7XG4gIGNvbnN0IHQgPSBTdHJpbmcoZSk7XG4gIGlmICh0ID09PSBcIjFcIiB8fCB0ID09PSBcInRydWVcIilcbiAgICByZXR1cm4gITA7XG4gIGlmICh0ID09PSBcIjBcIiB8fCB0ID09PSBcImZhbHNlXCIpXG4gICAgcmV0dXJuICExO1xuICBSKGUpO1xufSksIF8gPSBnKFwic3RyaW5nXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBlID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIGUudG9TdHJpbmcoKTtcbiAgUihlKTtcbn0pLCBQID0gZyhcIm51bWJlclwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZTtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCB0ID0gTnVtYmVyKGUpO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHQpKVxuICAgICAgcmV0dXJuIHQ7XG4gIH1cbiAgUihlKTtcbn0pLCBFZSA9IGcoXCJkYXRlXCIsIChlKSA9PiBlIGluc3RhbmNlb2YgRGF0ZSA/IGUgOiBuZXcgRGF0ZShQKCkoZSkgKiAxZTMpKTtcbmZ1bmN0aW9uIHooZSwgdCkge1xuICByZXR1cm4gZyh0IHx8IFwic2VhcmNoUGFyYW1zXCIsIChyKSA9PiB7XG4gICAgdHlwZW9mIHIgIT0gXCJzdHJpbmdcIiAmJiAhKHIgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXMpICYmIFIocik7XG4gICAgY29uc3QgbiA9IHR5cGVvZiByID09IFwic3RyaW5nXCIgPyBuZXcgVVJMU2VhcmNoUGFyYW1zKHIpIDogcjtcbiAgICByZXR1cm4gVihlLCAobykgPT4ge1xuICAgICAgY29uc3QgcyA9IG4uZ2V0KG8pO1xuICAgICAgcmV0dXJuIHMgPT09IG51bGwgPyB2b2lkIDAgOiBzO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGooZSkge1xuICBmb3IgKGNvbnN0IHQgaW4gZSlcbiAgICBlW3RdID0gW0codCksIGVbdF1dO1xuICByZXR1cm4gZTtcbn1cbmNvbnN0IHllID0gKGUpID0+IHtcbiAgY29uc3QgdCA9IFAoKSwgciA9IFAoITApLCBuID0gXygpLCBvID0gXyghMCksIHMgPSAkKCEwKSwgYSA9IGwoaih7XG4gICAgYWRkZWRUb0F0dGFjaG1lbnRNZW51OiBzLFxuICAgIGFsbG93c1dyaXRlVG9QbTogcyxcbiAgICBmaXJzdE5hbWU6IG4sXG4gICAgaWQ6IHQsXG4gICAgaXNCb3Q6IHMsXG4gICAgaXNQcmVtaXVtOiBzLFxuICAgIGxhbmd1YWdlQ29kZTogbyxcbiAgICBsYXN0TmFtZTogbyxcbiAgICBwaG90b1VybDogbyxcbiAgICB1c2VybmFtZTogb1xuICB9KSwgXCJVc2VyXCIpKCEwKTtcbiAgcmV0dXJuIHooXG4gICAgaih7XG4gICAgICBhdXRoRGF0ZTogRWUoKSxcbiAgICAgIGNhblNlbmRBZnRlcjogcixcbiAgICAgIGNoYXQ6IGwoXG4gICAgICAgIGooe1xuICAgICAgICAgIGlkOiB0LFxuICAgICAgICAgIHR5cGU6IG4sXG4gICAgICAgICAgdGl0bGU6IG4sXG4gICAgICAgICAgcGhvdG9Vcmw6IG8sXG4gICAgICAgICAgdXNlcm5hbWU6IG9cbiAgICAgICAgfSksXG4gICAgICAgIFwiQ2hhdFwiXG4gICAgICApKCEwKSxcbiAgICAgIGNoYXRJbnN0YW5jZTogbyxcbiAgICAgIGNoYXRUeXBlOiBvLFxuICAgICAgaGFzaDogbixcbiAgICAgIHF1ZXJ5SWQ6IG8sXG4gICAgICByZWNlaXZlcjogYSxcbiAgICAgIHN0YXJ0UGFyYW06IG8sXG4gICAgICBzaWduYXR1cmU6IG4sXG4gICAgICB1c2VyOiBhXG4gICAgfSksXG4gICAgXCJpbml0RGF0YVwiXG4gICkoZSk7XG59O1xuZnVuY3Rpb24gdmUoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17Nn0kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIFBlKGUpIHtcbiAgcmV0dXJuIC9eI1tcXGRhLWZdezN9JC9pLnRlc3QoZSk7XG59XG5mdW5jdGlvbiBSZShlKSB7XG4gIGNvbnN0IHQgPSBlLnJlcGxhY2UoL1xccy9nLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAodmUodCkpXG4gICAgcmV0dXJuIHQ7XG4gIGlmIChQZSh0KSkge1xuICAgIGxldCBuID0gXCIjXCI7XG4gICAgZm9yIChsZXQgbyA9IDA7IG8gPCAzOyBvICs9IDEpXG4gICAgICBuICs9IHRbMSArIG9dLnJlcGVhdCgyKTtcbiAgICByZXR1cm4gbjtcbiAgfVxuICBjb25zdCByID0gdC5tYXRjaCgvXnJnYlxcKChcXGR7MSwzfSksKFxcZHsxLDN9KSwoXFxkezEsM30pXFwpJC8pIHx8IHQubWF0Y2goL15yZ2JhXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSksXFxkezEsM31cXCkkLyk7XG4gIGlmICghcilcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIFwiJHtlfVwiIGRvZXMgbm90IHNhdGlzZnkgYW55IG9mIGtub3duIFJHQiBmb3JtYXRzLmApO1xuICByZXR1cm4gci5zbGljZSgxKS5yZWR1Y2UoKG4sIG8pID0+IHtcbiAgICBjb25zdCBzID0gcGFyc2VJbnQobywgMTApLnRvU3RyaW5nKDE2KTtcbiAgICByZXR1cm4gbiArIChzLmxlbmd0aCA9PT0gMSA/IFwiMFwiIDogXCJcIikgKyBzO1xuICB9LCBcIiNcIik7XG59XG5jb25zdCBUZSA9IGcoXCJyZ2JcIiwgKGUpID0+IFJlKF8oKShlKSkpLCBJID0gZyhcbiAgXCJ0aGVtZVBhcmFtc1wiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBUZSghMCk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFooZSkpLnJlZHVjZSgociwgW24sIG9dKSA9PiAoclt3ZShuKV0gPSB0KG8pLCByKSwge30pO1xuICB9XG4pO1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIFcoZSkge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXMoZSkubWFwKChbdCwgcl0pID0+IFtHKHQpLCByXSlcbiAgICApXG4gICk7XG59XG5jb25zdCBBZSA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBfKCksIHIgPSBfKCEwKSwgbiA9ICQoITApO1xuICByZXR1cm4geih7XG4gICAgYm90SW5saW5lOiBbXCJ0Z1dlYkFwcEJvdElubGluZVwiLCBuXSxcbiAgICBkZWZhdWx0Q29sb3JzOiBbXCJ0Z1dlYkFwcERlZmF1bHRDb2xvcnNcIiwgSSghMCldLFxuICAgIGZ1bGxzY3JlZW46IFtcInRnV2ViQXBwRnVsbHNjcmVlblwiLCBuXSxcbiAgICBpbml0RGF0YTogW1widGdXZWJBcHBEYXRhXCIsIHllKCEwKV0sXG4gICAgaW5pdERhdGFSYXc6IFtcInRnV2ViQXBwRGF0YVwiLCByXSxcbiAgICBwbGF0Zm9ybTogW1widGdXZWJBcHBQbGF0Zm9ybVwiLCB0XSxcbiAgICBzaG93U2V0dGluZ3M6IFtcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIG5dLFxuICAgIHN0YXJ0UGFyYW06IFtcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCByXSxcbiAgICB0aGVtZVBhcmFtczogW1widGdXZWJBcHBUaGVtZVBhcmFtc1wiLCBJKCldLFxuICAgIHZlcnNpb246IFtcInRnV2ViQXBwVmVyc2lvblwiLCB0XVxuICB9LCBcImxhdW5jaFBhcmFtc1wiKShlKTtcbn07XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gU2UoZSkge1xuICBjb25zdCB7XG4gICAgaW5pdERhdGFSYXc6IHQsXG4gICAgc3RhcnRQYXJhbTogcixcbiAgICBzaG93U2V0dGluZ3M6IG4sXG4gICAgYm90SW5saW5lOiBvLFxuICAgIGZ1bGxzY3JlZW46IHMsXG4gICAgZGVmYXVsdENvbG9yczogYVxuICB9ID0gZSwgYyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgcmV0dXJuIGMuc2V0KFwidGdXZWJBcHBQbGF0Zm9ybVwiLCBlLnBsYXRmb3JtKSwgYy5zZXQoXCJ0Z1dlYkFwcFRoZW1lUGFyYW1zXCIsIC8qIEBfX1BVUkVfXyAqLyBXKGUudGhlbWVQYXJhbXMpKSwgYy5zZXQoXCJ0Z1dlYkFwcFZlcnNpb25cIiwgZS52ZXJzaW9uKSwgdCAmJiBjLnNldChcInRnV2ViQXBwRGF0YVwiLCB0KSwgciAmJiBjLnNldChcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCByKSwgdHlwZW9mIG4gPT0gXCJib29sZWFuXCIgJiYgYy5zZXQoXCJ0Z1dlYkFwcFNob3dTZXR0aW5nc1wiLCBuID8gXCIxXCIgOiBcIjBcIiksIHR5cGVvZiBvID09IFwiYm9vbGVhblwiICYmIGMuc2V0KFwidGdXZWJBcHBCb3RJbmxpbmVcIiwgbyA/IFwiMVwiIDogXCIwXCIpLCB0eXBlb2YgcyA9PSBcImJvb2xlYW5cIiAmJiBjLnNldChcInRnV2ViQXBwRnVsbHNjcmVlblwiLCBzID8gXCIxXCIgOiBcIjBcIiksIGEgJiYgYy5zZXQoXCJ0Z1dlYkFwcERlZmF1bHRDb2xvcnNcIiwgLyogQF9fUFVSRV9fICovIFcoYSkpLCBjLnRvU3RyaW5nKCk7XG59XG5jb25zdCBYID0gbCh7XG4gIGV2ZW50VHlwZTogXygpLFxuICBldmVudERhdGE6IChlKSA9PiBlXG59LCBcIm1pbmlBcHBzTWVzc2FnZVwiKSwgWSA9IGcoXCJmblwiLCAoZSkgPT4ge1xuICBpZiAodHlwZW9mIGUgPT0gXCJmdW5jdGlvblwiKVxuICAgIHJldHVybiBlO1xuICBSKGUpO1xufSk7XG5mdW5jdGlvbiAkZShlKSB7XG4gIHJldHVybiAhIWUgJiYgdHlwZW9mIGUgPT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheShlKTtcbn1cbmNvbnN0IENlID0gbCh7XG4gIFRlbGVncmFtV2Vidmlld1Byb3h5OiBsKHsgcG9zdEV2ZW50OiBZKCkgfSkoKVxufSk7XG5mdW5jdGlvbiBRKGUpIHtcbiAgcmV0dXJuIENlKCkuaXNWYWxpZChlKTtcbn1cbmZ1bmN0aW9uIE5lKCkge1xuICB0cnkge1xuICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuICEwO1xuICB9XG59XG52YXIgRGUgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksIGplID0gKGUsIHQsIHIpID0+IHQgaW4gZSA/IERlKGUsIHQsIHsgZW51bWVyYWJsZTogITAsIGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IHIgfSkgOiBlW3RdID0gciwgZWUgPSAoZSwgdCwgcikgPT4gamUoZSwgdHlwZW9mIHQgIT0gXCJzeW1ib2xcIiA/IHQgKyBcIlwiIDogdCwgcik7XG5jbGFzcyBiIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCByLCBuKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgciA9PSBcIm9iamVjdFwiID8gci5tZXNzYWdlIDogciB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIHIgPT0gXCJvYmplY3RcIiA/IHIuY2F1c2UgOiBuXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgdGhpcy5uYW1lID0gXCJUeXBlZEVycm9yXCIsIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBiLnByb3RvdHlwZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHRlKGUsIHQsIHIpIHtcbiAgcmV0dXJuIGUuYWRkRXZlbnRMaXN0ZW5lcih0LCByKSwgKCkgPT4gZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIHIpO1xufVxuZnVuY3Rpb24gayguLi5lKSB7XG4gIGNvbnN0IHQgPSBlLmZsYXQoMSk7XG4gIHJldHVybiBbXG4gICAgdC5wdXNoLmJpbmQodCksXG4gICAgKCkgPT4ge1xuICAgICAgdC5mb3JFYWNoKChyKSA9PiB7XG4gICAgICAgIHIoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgXTtcbn1cbmZ1bmN0aW9uIFVlKGUsIHQpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBiICYmIGUudHlwZSA9PT0gdDtcbn1cbmZ1bmN0aW9uIEwoZSkge1xuICByZXR1cm4gKHQpID0+IFVlKHQsIGUpO1xufVxuY29uc3QgcmUgPSBcIkVSUl9BQk9SVEVEXCIsIG5lID0gXCJFUlJfQ0FOQ0VMRURcIiwgb2UgPSBcIkVSUl9USU1FRF9PVVRcIjtcbmZ1bmN0aW9uIE0oZSkge1xuICByZXR1cm4gbmV3IGIocmUsIHsgY2F1c2U6IGUgfSk7XG59XG5jb25zdCBudCA9IEwob2UpLCBvdCA9IEwocmUpLCBzdCA9IEwobmUpO1xuZnVuY3Rpb24gRihlLCB0KSB7XG4gIHJldHVybiBlLnJlamVjdCA9IHQucmVqZWN0LCBlO1xufVxuY2xhc3MgdyBleHRlbmRzIFByb21pc2Uge1xuICBjb25zdHJ1Y3Rvcih0LCByKSB7XG4gICAgbGV0IG4sIG87XG4gICAgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gKG4gPSB0LCBvID0gcikgOiBvID0gdDtcbiAgICBsZXQgcywgYTtcbiAgICBzdXBlcigoYywgaSkgPT4ge1xuICAgICAgbyB8fCAobyA9IHt9KTtcbiAgICAgIGNvbnN0IHsgYWJvcnRTaWduYWw6IHUgfSA9IG87XG4gICAgICBpZiAodSAmJiB1LmFib3J0ZWQpXG4gICAgICAgIHJldHVybiBpKE0odS5yZWFzb24pKTtcbiAgICAgIGNvbnN0IFtmLCBoXSA9IGsoKSwgbSA9IChFKSA9PiAoLi4uZ2UpID0+IChoKCksIEUoLi4uZ2UpKSwgVCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgeyBzaWduYWw6IEEgfSA9IFQ7XG4gICAgICBhID0gbSgoRSkgPT4ge1xuICAgICAgICBULmFib3J0KEUpLCBpKEUpO1xuICAgICAgfSksIHMgPSBtKGMpLCB1ICYmIGYoXG4gICAgICAgIHRlKHUsIFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICAgIGEoTSh1LnJlYXNvbikpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIGNvbnN0IHsgdGltZW91dDogRCB9ID0gbztcbiAgICAgIGlmIChEKSB7XG4gICAgICAgIGNvbnN0IEUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBhKG5ldyBiKG9lLCBgVGltZW91dCByZWFjaGVkOiAke0R9bXNgKSk7XG4gICAgICAgIH0sIEQpO1xuICAgICAgICBmKCgpID0+IHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoRSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbiAmJiBuKHMsIGEsIEEpO1xuICAgIH0pLCBlZSh0aGlzLCBcInJlamVjdFwiKSwgdGhpcy5yZWplY3QgPSBhO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEJldHRlclByb21pc2UgaW5zdGFuY2UgdXNpbmcgZXhlY3V0b3IsIHJlc29sdmluZyBwcm9taXNlIHdoZW4gYSByZXN1bHRcbiAgICogd2FzIHJldHVybmVkLlxuICAgKiBAcGFyYW0gZm4gLSBmdW5jdGlvbiByZXR1cm5pbmcgcHJvbWlzZSByZXN1bHQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYWRkaXRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgc3RhdGljIHdpdGhGbih0LCByKSB7XG4gICAgcmV0dXJuIG5ldyB3KChuLCBvLCBzKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBhID0gdChzKTtcbiAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBQcm9taXNlID8gYS50aGVuKG4sIG8pIDogbihhKTtcbiAgICAgIH0gY2F0Y2ggKGEpIHtcbiAgICAgICAgbyhhKTtcbiAgICAgIH1cbiAgICB9LCByKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICByZXR1cm4gbmV3IHcoKHIpID0+IHtcbiAgICAgIHIodCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZWplY3RcbiAgICovXG4gIHN0YXRpYyByZWplY3QodCkge1xuICAgIHJldHVybiBuZXcgdygociwgbikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgcHJvbWlzZSBleGVjdXRpb24uXG4gICAqL1xuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5yZWplY3QobmV3IGIobmUpKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmNhdGNoXG4gICAqL1xuICBjYXRjaCh0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHQpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuZmluYWxseVxuICAgKi9cbiAgZmluYWxseSh0KSB7XG4gICAgcmV0dXJuIEYoc3VwZXIuZmluYWxseSh0KSwgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS50aGVuXG4gICAqL1xuICB0aGVuKHQsIHIpIHtcbiAgICByZXR1cm4gRihzdXBlci50aGVuKHQsIHIpLCB0aGlzKTtcbiAgfVxufVxuZnVuY3Rpb24gSihlLCB0KSB7XG4gIHJldHVybiBlLnJlc29sdmUgPSB0LnJlc29sdmUsIGU7XG59XG5jbGFzcyBTIGV4dGVuZHMgdyB7XG4gIGNvbnN0cnVjdG9yKHQsIHIpIHtcbiAgICBsZXQgbiwgbztcbiAgICB0eXBlb2YgdCA9PSBcImZ1bmN0aW9uXCIgPyAobiA9IHQsIG8gPSByKSA6IG8gPSB0O1xuICAgIGxldCBzO1xuICAgIHN1cGVyKChhLCBjLCBpKSA9PiB7XG4gICAgICBzID0gYSwgbiAmJiBuKGEsIGMsIGkpO1xuICAgIH0sIG8pLCBlZSh0aGlzLCBcInJlc29sdmVcIiksIHRoaXMucmVzb2x2ZSA9IHM7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRW5oYW5jZWRQcm9taXNlIGluc3RhbmNlIHVzaW5nIGV4ZWN1dG9yLCByZXNvbHZpbmcgcHJvbWlzZSB3aGVuIGEgcmVzdWx0XG4gICAqIHdhcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIGZuIC0gZnVuY3Rpb24gcmV0dXJuaW5nIHByb21pc2UgcmVzdWx0LlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIGFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICovXG4gIHN0YXRpYyB3aXRoRm4odCwgcikge1xuICAgIHJldHVybiBuZXcgUyhcbiAgICAgIChuLCBvLCBzKSA9PiB3LndpdGhGbih0LCB7IGFib3J0U2lnbmFsOiBzIH0pLnRoZW4obiwgbyksXG4gICAgICByXG4gICAgKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlc29sdmVcbiAgICovXG4gIHN0YXRpYyByZXNvbHZlKHQpIHtcbiAgICByZXR1cm4gbmV3IFMoKHIpID0+IHtcbiAgICAgIHIodCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5yZWplY3RcbiAgICovXG4gIHN0YXRpYyByZWplY3QodCkge1xuICAgIHJldHVybiBuZXcgUygociwgbikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLmNhdGNoXG4gICAqL1xuICBjYXRjaCh0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHQpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuZmluYWxseVxuICAgKi9cbiAgZmluYWxseSh0KSB7XG4gICAgcmV0dXJuIEooc3VwZXIuZmluYWxseSh0KSwgdGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS50aGVuXG4gICAqL1xuICB0aGVuKHQsIHIpIHtcbiAgICByZXR1cm4gSihzdXBlci50aGVuKHQsIHIpLCB0aGlzKTtcbiAgfVxufVxuZnVuY3Rpb24gYXQoZSwgdCkge1xuICByZXR1cm4gbmV3IHcoKHIpID0+IHtcbiAgICBzZXRUaW1lb3V0KHIsIGUpO1xuICB9LCB7IGFib3J0U2lnbmFsOiB0IH0pO1xufVxuZnVuY3Rpb24gc2UoZSkge1xuICByZXR1cm4gYHRhcHBzLyR7ZX1gO1xufVxuZnVuY3Rpb24gV2UoZSwgdCkge1xuICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHNlKGUpLCBKU09OLnN0cmluZ2lmeSh0KSk7XG59XG5mdW5jdGlvbiB4ZShlKSB7XG4gIGNvbnN0IHQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHNlKGUpKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdCA/IEpTT04ucGFyc2UodCkgOiB2b2lkIDA7XG4gIH0gY2F0Y2gge1xuICB9XG59XG5mdW5jdGlvbiBjdChlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL1tBLVpdL2csICh0KSA9PiBgLSR7dC50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gaXQoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9bQS1aXS9nLCAodCkgPT4gYF8ke3QudG9Mb3dlckNhc2UoKX1gKTtcbn1cbmZ1bmN0aW9uIHV0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvX1thLXpdL2csICh0KSA9PiB0WzFdLnRvVXBwZXJDYXNlKCkpO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIGtlKGUsIHQpIHtcbiAgdCB8fCAodCA9IHt9KTtcbiAgY29uc3Qge1xuICAgIHRleHRDb2xvcjogcixcbiAgICBiZ0NvbG9yOiBuLFxuICAgIHNob3VsZExvZzogbyA9ICEwXG4gIH0gPSB0O1xuICBmdW5jdGlvbiBzKGEsIC4uLmMpIHtcbiAgICBpZiAoIW8gfHwgdHlwZW9mIG8gPT0gXCJmdW5jdGlvblwiICYmICFvKCkpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaSA9IFwiZm9udC13ZWlnaHQ6Ym9sZDtwYWRkaW5nOjAgNXB4O2JvcmRlci1yYWRpdXM6NXB4XCI7XG4gICAgY29uc29sZVthXShcbiAgICAgIGAlYyR7SW50bC5EYXRlVGltZUZvcm1hdChcImVuLUdCXCIsIHtcbiAgICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgICAgIHNlY29uZDogXCIyLWRpZ2l0XCIsXG4gICAgICAgIGZyYWN0aW9uYWxTZWNvbmREaWdpdHM6IDMsXG4gICAgICAgIHRpbWVab25lOiBcIlVUQ1wiXG4gICAgICB9KS5mb3JtYXQoLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpfSVjIC8gJWMke2V9YCxcbiAgICAgIGAke2l9O2JhY2tncm91bmQtY29sb3I6IGxpZ2h0Ymx1ZTtjb2xvcjpibGFja2AsXG4gICAgICBcIlwiLFxuICAgICAgYCR7aX07JHtyID8gYGNvbG9yOiR7cn07YCA6IFwiXCJ9JHtuID8gYGJhY2tncm91bmQtY29sb3I6JHtufWAgOiBcIlwifWAsXG4gICAgICAuLi5jXG4gICAgKTtcbiAgfVxuICByZXR1cm4gW1xuICAgIGZ1bmN0aW9uKC4uLmEpIHtcbiAgICAgIHMoXCJsb2dcIiwgLi4uYSk7XG4gICAgfSxcbiAgICBmdW5jdGlvbiguLi5hKSB7XG4gICAgICBzKFwiZXJyb3JcIiwgLi4uYSk7XG4gICAgfVxuICBdO1xufVxuZnVuY3Rpb24gcHQoZSwgdCkge1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoZSwgdCk7XG59XG5mdW5jdGlvbiBmdChlKSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShlKTtcbn1cbmZ1bmN0aW9uIExlKGUsIHQpIHtcbiAgdCgpO1xufVxuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIHkoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCByID0gdC5lcXVhbHMgfHwgT2JqZWN0LmlzO1xuICBsZXQgbiA9IFtdLCBvID0gZTtcbiAgY29uc3QgcyA9ICh1KSA9PiB7XG4gICAgaWYgKCFyKG8sIHUpKSB7XG4gICAgICBjb25zdCBmID0gbztcbiAgICAgIG8gPSB1LCBMZShpLCAoKSA9PiB7XG4gICAgICAgIFsuLi5uXS5mb3JFYWNoKChbaCwgbV0pID0+IHtcbiAgICAgICAgICBoKHUsIGYpLCBtICYmIGMoaCwgITApO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gYSh1KSB7XG4gICAgY29uc3QgZiA9IHR5cGVvZiB1ICE9IFwib2JqZWN0XCIgPyB7IG9uY2U6IHUgfSA6IHU7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uY2U6IGYub25jZSB8fCAhMSxcbiAgICAgIHNpZ25hbDogZi5zaWduYWwgfHwgITFcbiAgICB9O1xuICB9XG4gIGNvbnN0IGMgPSAodSwgZikgPT4ge1xuICAgIGNvbnN0IGggPSBhKGYpLCBtID0gbi5maW5kSW5kZXgoKFtULCBBXSkgPT4gVCA9PT0gdSAmJiBBLm9uY2UgPT09IGgub25jZSAmJiBBLnNpZ25hbCA9PT0gaC5zaWduYWwpO1xuICAgIG0gPj0gMCAmJiBuLnNwbGljZShtLCAxKTtcbiAgfSwgaSA9IE9iamVjdC5hc3NpZ24oXG4gICAgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2UoaSksIG87XG4gICAgfSxcbiAgICB7XG4gICAgICBkZXN0cm95KCkge1xuICAgICAgICBuID0gW107XG4gICAgICB9LFxuICAgICAgc2V0OiBzLFxuICAgICAgcmVzZXQoKSB7XG4gICAgICAgIHMoZSk7XG4gICAgICB9LFxuICAgICAgc3ViKHUsIGYpIHtcbiAgICAgICAgcmV0dXJuIG4ucHVzaChbdSwgYShmKV0pLCAoKSA9PiBjKHUsIGYpO1xuICAgICAgfSxcbiAgICAgIHVuc3ViOiBjLFxuICAgICAgdW5zdWJBbGwoKSB7XG4gICAgICAgIG4gPSBuLmZpbHRlcigodSkgPT4gdVsxXS5zaWduYWwpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGk7XG59XG5jb25zdCBVID0gW107XG5mdW5jdGlvbiBPZShlKSB7XG4gIFUubGVuZ3RoICYmIFVbVS5sZW5ndGggLSAxXS5hZGQoZSk7XG59XG5jb25zdCBhZSA9IC8qIEBfX1BVUkVfXyAqLyB5KCExKSwgW08sIHFlXSA9IC8qIEBfX1BVUkVfXyAqLyBrZShcIkJyaWRnZVwiLCB7XG4gIGJnQ29sb3I6IFwiIzkxNDdmZlwiLFxuICB0ZXh0Q29sb3I6IFwid2hpdGVcIixcbiAgc2hvdWxkTG9nOiBhZVxufSksIEllID0ge1xuICBjbGlwYm9hcmRfdGV4dF9yZWNlaXZlZDogbCh7XG4gICAgcmVxX2lkOiBfKCksXG4gICAgZGF0YTogKGUpID0+IGUgPT09IG51bGwgPyBlIDogXyghMCkoZSlcbiAgfSwgXCJjbGlwYm9hcmRfdGV4dF9yZWNlaXZlZFwiKSxcbiAgY3VzdG9tX21ldGhvZF9pbnZva2VkOiBsKHtcbiAgICByZXFfaWQ6IF8oKSxcbiAgICByZXN1bHQ6IChlKSA9PiBlLFxuICAgIGVycm9yOiBfKCEwKVxuICB9LCBcImN1c3RvbV9tZXRob2RfaW52b2tlZFwiKSxcbiAgcG9wdXBfY2xvc2VkOiBnKFwicG9wdXBfY2xvc2VkXCIsIChlKSA9PiBlID8gbCh7XG4gICAgYnV0dG9uX2lkOiAodCkgPT4gdCA9PSBudWxsID8gdm9pZCAwIDogXygpKHQpXG4gIH0pKCkoZSkgOiB7fSksXG4gIHZpZXdwb3J0X2NoYW5nZWQ6IGwoe1xuICAgIGhlaWdodDogUCgpLFxuICAgIHdpZHRoOiAoZSkgPT4gZSA9PSBudWxsID8gd2luZG93LmlubmVyV2lkdGggOiBQKCkoZSksXG4gICAgaXNfc3RhdGVfc3RhYmxlOiAkKCksXG4gICAgaXNfZXhwYW5kZWQ6ICQoKVxuICB9LCBcInZpZXdwb3J0X2NoYW5nZWRcIilcbn07XG5mdW5jdGlvbiBNZShlKSB7XG4gIGNvbnN0IHQgPSB3aW5kb3csIFssIHJdID0gayhcbiAgICAvLyBBZGQgbGlzdGVuZXIsIHdoaWNoIGhhbmRsZXMgZXZlbnRzIHNlbnQgZnJvbSB0aGUgVGVsZWdyYW0gd2ViIGFwcGxpY2F0aW9uIGFuZCBhbHNvIGV2ZW50c1xuICAgIC8vIGdlbmVyYXRlZCBieSB0aGUgbG9jYWwgZW1pdEV2ZW50IGZ1bmN0aW9uLlxuICAgIHRlKHQsIFwibWVzc2FnZVwiLCAobikgPT4ge1xuICAgICAgaWYgKG4uc291cmNlICE9PSB0LnBhcmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbGV0IG87XG4gICAgICB0cnkge1xuICAgICAgICBvID0gWCgpKG4uZGF0YSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBldmVudFR5cGU6IHMsIGV2ZW50RGF0YTogYSB9ID0gbywgYyA9IEllW3NdO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaSA9IGMgPyBjKCkoYSkgOiBhO1xuICAgICAgICBPKFwiRXZlbnQgcmVjZWl2ZWQ6XCIsIGkgPyB7IGV2ZW50VHlwZTogcywgZXZlbnREYXRhOiBpIH0gOiB7IGV2ZW50VHlwZTogcyB9KSwgZShbcywgaV0pO1xuICAgICAgfSBjYXRjaCAoaSkge1xuICAgICAgICBxZShcbiAgICAgICAgICBbXG4gICAgICAgICAgICBgQW4gZXJyb3Igb2NjdXJyZWQgcHJvY2Vzc2luZyB0aGUgXCIke3N9XCIgZXZlbnQgZnJvbSB0aGUgVGVsZWdyYW0gYXBwbGljYXRpb24uYCxcbiAgICAgICAgICAgIFwiUGxlYXNlLCBmaWxlIGFuIGlzc3VlIGhlcmU6XCIsXG4gICAgICAgICAgICBcImh0dHBzOi8vZ2l0aHViLmNvbS9UZWxlZ3JhbS1NaW5pLUFwcHMvdGVsZWdyYW0tYXBwcy9pc3N1ZXMvbmV3L2Nob29zZVwiXG4gICAgICAgICAgXS5qb2luKGBcbmApLFxuICAgICAgICAgIG8sXG4gICAgICAgICAgaVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pXG4gICk7XG4gIHJldHVybiByO1xufVxuY29uc3QgQyA9IC8qIEBfX1BVUkVfXyAqLyB5KCksIE4gPSAvKiBAX19QVVJFX18gKi8geSgpO1xuZnVuY3Rpb24gY2UoKSB7XG4gIHJldHVybiBOKCkgfHwgTi5zZXQoTWUoQy5zZXQpKSwgQztcbn1cbmNvbnN0IHYgPSAvKiBAX19QVVJFX18gKi8geSh7fSk7XG5mdW5jdGlvbiBpZShlKSB7XG4gIGxldCB0ID0gdigpW2VdO1xuICByZXR1cm4gdCB8fCAodCA9IC8qIEBfX1BVUkVfXyAqLyB5KHZvaWQgMCwge1xuICAgIGVxdWFscygpIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0pLCBjZSgpLnN1YigocikgPT4ge1xuICAgIHIgJiYgclswXSA9PT0gZSAmJiB0LnNldChyWzFdKTtcbiAgfSksIHYuc2V0KHsgLi4udigpLCBbZV06IHQgfSkpLCB0O1xufVxuZnVuY3Rpb24gRmUoZSwgdCwgcikge1xuICByZXR1cm4gaWUoZSkuc3ViKHQsIHIpO1xufVxuY29uc3QgSmUgPSBcIkVSUl9NRVRIT0RfVU5TVVBQT1JURURcIiwgQmUgPSBcIkVSUl9SRVRSSUVWRV9MUF9GQUlMRURcIiwgSGUgPSBcIkVSUl9NRVRIT0RfUEFSQU1FVEVSX1VOU1VQUE9SVEVEXCIsIEdlID0gXCJFUlJfVU5LTk9XTl9FTlZcIiwgS2UgPSBcIkVSUl9JTlZPS0VfQ1VTVE9NX01FVEhPRF9SRVNQT05TRVwiLCB1ZSA9IC8qIEBfX1BVUkVfXyAqLyB5KFwiaHR0cHM6Ly93ZWIudGVsZWdyYW0ub3JnXCIpO1xuZnVuY3Rpb24gcGUoZSwgdCkge1xuICBPKFwiUG9zdGluZyBldmVudDpcIiwgdCA/IHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSA6IHsgZXZlbnRUeXBlOiBlIH0pO1xuICBjb25zdCByID0gd2luZG93O1xuICBpZiAoUShyKSkge1xuICAgIHIuVGVsZWdyYW1XZWJ2aWV3UHJveHkucG9zdEV2ZW50KGUsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbiA9IEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSk7XG4gIGlmIChOZSgpKVxuICAgIHJldHVybiByLnBhcmVudC5wb3N0TWVzc2FnZShuLCB1ZSgpKTtcbiAgY29uc3QgeyBleHRlcm5hbDogbyB9ID0gcjtcbiAgaWYgKGwoeyBub3RpZnk6IFkoKSB9KSgpLmlzVmFsaWQobykpIHtcbiAgICBvLm5vdGlmeShuKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhyb3cgbmV3IGIoR2UpO1xufVxuZnVuY3Rpb24gZmUoZSwgdCwgcikge1xuICByIHx8IChyID0ge30pO1xuICBjb25zdCB7IGNhcHR1cmU6IG4gfSA9IHIsIFtvLCBzXSA9IGsoKTtcbiAgcmV0dXJuIG5ldyB3KChhKSA9PiB7XG4gICAgKEFycmF5LmlzQXJyYXkodCkgPyB0IDogW3RdKS5mb3JFYWNoKChjKSA9PiB7XG4gICAgICBvKFxuICAgICAgICBGZShjLCAoaSkgPT4ge1xuICAgICAgICAgICghbiB8fCAoQXJyYXkuaXNBcnJheSh0KSA/IG4oe1xuICAgICAgICAgICAgZXZlbnQ6IGMsXG4gICAgICAgICAgICBwYXlsb2FkOiBpXG4gICAgICAgICAgfSkgOiBuKGkpKSkgJiYgYShpKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSksIChyLnBvc3RFdmVudCB8fCBwZSkoZSwgci5wYXJhbXMpO1xuICB9LCByKS5maW5hbGx5KHMpO1xufVxuZnVuY3Rpb24gcShlKSB7XG4gIHJldHVybiBBZSgpKGUpO1xufVxuZnVuY3Rpb24gX2UoZSkge1xuICByZXR1cm4gcShcbiAgICBlLnJlcGxhY2UoL15bXj8jXSpbPyNdLywgXCJcIikucmVwbGFjZSgvWz8jXS9nLCBcIiZcIilcbiAgKTtcbn1cbmZ1bmN0aW9uIFZlKCkge1xuICByZXR1cm4gX2Uod2luZG93LmxvY2F0aW9uLmhyZWYpO1xufVxuZnVuY3Rpb24gWmUoKSB7XG4gIGNvbnN0IGUgPSBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKVswXTtcbiAgaWYgKCFlKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgZmlyc3QgbmF2aWdhdGlvbiBlbnRyeS5cIik7XG4gIHJldHVybiBfZShlLm5hbWUpO1xufVxuY29uc3QgemUgPSBcImxhdW5jaFBhcmFtc1wiO1xuZnVuY3Rpb24gWGUoKSB7XG4gIHJldHVybiBxKHhlKHplKSB8fCBcIlwiKTtcbn1cbmZ1bmN0aW9uIGxlKGUpIHtcbiAgV2UoXCJsYXVuY2hQYXJhbXNcIiwgLyogQF9fUFVSRV9fICovIFNlKGUpKTtcbn1cbmZ1bmN0aW9uIGJlKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSArIChlLmNhdXNlID8gYFxuICAke2JlKGUuY2F1c2UpfWAgOiBcIlwiKSA6IEpTT04uc3RyaW5naWZ5KGUpO1xufVxuZnVuY3Rpb24gWWUoKSB7XG4gIGNvbnN0IGUgPSBbXTtcbiAgZm9yIChjb25zdCB0IG9mIFtcbiAgICAvLyBUcnkgdG8gcmV0cmlldmUgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbi4gVGhpcyBtZXRob2QgY2FuIHJldHVyblxuICAgIC8vIG5vdGhpbmcgaW4gY2FzZSwgbG9jYXRpb24gd2FzIGNoYW5nZWQsIGFuZCB0aGVuIHRoZSBwYWdlIHdhcyByZWxvYWRlZC5cbiAgICBWZSxcbiAgICAvLyBUaGVuLCB0cnkgdXNpbmcgdGhlIGxvd2VyIGxldmVsIEFQSSAtIHdpbmRvdy5wZXJmb3JtYW5jZS5cbiAgICBaZSxcbiAgICAvLyBGaW5hbGx5LCB0cnkgdG8gZXh0cmFjdCBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIHRoZSBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgWGVcbiAgXSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgciA9IHQoKTtcbiAgICAgIHJldHVybiBsZShyKSwgcjtcbiAgICB9IGNhdGNoIChyKSB7XG4gICAgICBlLnB1c2gocik7XG4gICAgfVxuICB0aHJvdyBuZXcgYihCZSwgW1xuICAgIFwiVW5hYmxlIHRvIHJldHJpZXZlIGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gYW55IGtub3duIHNvdXJjZS4gUGVyaGFwcywgeW91IGhhdmUgb3BlbmVkIHlvdXIgYXBwIG91dHNpZGUgVGVsZWdyYW0/XCIsXG4gICAgXCLwn5OWIFJlZmVyIHRvIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb246XCIsXG4gICAgXCJodHRwczovL2RvY3MudGVsZWdyYW0tbWluaS1hcHBzLmNvbS9wYWNrYWdlcy90ZWxlZ3JhbS1hcHBzLWJyaWRnZS9lbnZpcm9ubWVudFwiLFxuICAgIFwiQ29sbGVjdGVkIGVycm9yczpcIixcbiAgICAuLi5lLm1hcCgodCkgPT4gYOKAlCAke2JlKHQpfWApXG4gIF0uam9pbihgXG5gKSk7XG59XG5mdW5jdGlvbiBfdChlKSB7XG4gIGlmIChlID09PSBcInNpbXBsZVwiKVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gWWUoKSwgITA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICByZXR1cm4gdy53aXRoRm4oYXN5bmMgKCkgPT4ge1xuICAgIGlmIChRKHdpbmRvdykpXG4gICAgICByZXR1cm4gITA7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBmZShcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiLCBcInRoZW1lX2NoYW5nZWRcIiwgeyB0aW1lb3V0OiAxMDAgfSksICEwO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfSwgZSk7XG59XG5mdW5jdGlvbiB4KGUsIHQpIHtcbiAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IE1lc3NhZ2VFdmVudChcIm1lc3NhZ2VcIiwge1xuICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSksXG4gICAgLy8gV2Ugc3BlY2lmeSB3aW5kb3cucGFyZW50IHRvIGltaXRhdGUgdGhlIGNhc2UsIHRoZSBwYXJlbnQgaWZyYW1lIHNlbnQgdXMgdGhpcyBldmVudC5cbiAgICBzb3VyY2U6IHdpbmRvdy5wYXJlbnRcbiAgfSkpO1xufVxuZnVuY3Rpb24gUWUoZSwgdCkge1xuICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBldmVudFR5cGU6IHIgfSA9IFgoKSh0KTtcbiAgICAgIHIgPT09IFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIgJiYgeChcInRoZW1lX2NoYW5nZWRcIiwge1xuICAgICAgICB0aGVtZV9wYXJhbXM6IEpTT04ucGFyc2UoLyogQF9fUFVSRV9fICovIFcoZSkpXG4gICAgICB9KSwgciA9PT0gXCJ3ZWJfYXBwX3JlcXVlc3Rfdmlld3BvcnRcIiAmJiB4KFwidmlld3BvcnRfY2hhbmdlZFwiLCB7XG4gICAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gICAgICAgIGlzX3N0YXRlX3N0YWJsZTogITAsXG4gICAgICAgIGlzX2V4cGFuZGVkOiAhMFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCB7XG4gICAgfVxufVxuZnVuY3Rpb24gbHQoZSkge1xuICB2YXIgbjtcbiAgY29uc3QgdCA9IHR5cGVvZiBlID09IFwic3RyaW5nXCIgPyBxKGUpIDogZTtcbiAgbGUodCk7XG4gIGNvbnN0IHIgPSAobiA9IHdpbmRvdy5UZWxlZ3JhbVdlYnZpZXdQcm94eSkgPT0gbnVsbCA/IHZvaWQgMCA6IG4ucG9zdEV2ZW50O1xuICB3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHkgPSB7XG4gICAgcG9zdEV2ZW50KG8sIHMpIHtcbiAgICAgIFFlKHQudGhlbWVQYXJhbXMsIEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBvLCBldmVudERhdGE6IHMgfSkpLCByID09IG51bGwgfHwgcihvLCBzKTtcbiAgICB9XG4gIH0sIE8oXCJFbnZpcm9ubWVudCB3YXMgbW9ja2VkIGJ5IHRoZSBtb2NrVGVsZWdyYW1FbnYgZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBidCgpIHtcbiAgW1xuICAgIFtcIlRlbGVncmFtR2FtZVByb3h5X3JlY2VpdmVFdmVudFwiXSxcbiAgICAvLyBXaW5kb3dzIFBob25lLlxuICAgIFtcIlRlbGVncmFtR2FtZVByb3h5XCIsIFwicmVjZWl2ZUV2ZW50XCJdLFxuICAgIC8vIERlc2t0b3AuXG4gICAgW1wiVGVsZWdyYW1cIiwgXCJXZWJWaWV3XCIsIFwicmVjZWl2ZUV2ZW50XCJdXG4gICAgLy8gQW5kcm9pZCBhbmQgaU9TLlxuICBdLmZvckVhY2goKGUpID0+IHtcbiAgICBsZXQgdCA9IHdpbmRvdztcbiAgICBlLmZvckVhY2goKHIsIG4sIG8pID0+IHtcbiAgICAgIGlmIChuID09PSBvLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdFtyXSA9IHg7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHIgaW4gdCB8fCAodFtyXSA9IHt9KSwgdCA9IHRbcl07XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZ3QoKSB7XG4gIFtcIlRlbGVncmFtR2FtZVByb3h5X3JlY2VpdmVFdmVudFwiLCBcIlRlbGVncmFtR2FtZVByb3h5XCIsIFwiVGVsZWdyYW1cIl0uZm9yRWFjaCgoZSkgPT4ge1xuICAgIGRlbGV0ZSB3aW5kb3dbZV07XG4gIH0pO1xufVxuZnVuY3Rpb24gd3QoZSwgdCwgcikge1xuICBpZShlKS51bnN1Yih0LCByKTtcbn1cbmZ1bmN0aW9uIGh0KGUsIHQpIHtcbiAgcmV0dXJuIGNlKCkuc3ViKGUsIHQpO1xufVxuZnVuY3Rpb24gbXQoZSwgdCkge1xuICBDLnVuc3ViKGUsIHQpO1xufVxuZnVuY3Rpb24gZXQoZSkge1xuICByZXR1cm4gKHsgcmVxX2lkOiB0IH0pID0+IHQgPT09IGU7XG59XG5mdW5jdGlvbiBCKGUpIHtcbiAgcmV0dXJuIGUuc3BsaXQoXCIuXCIpLm1hcChOdW1iZXIpO1xufVxuZnVuY3Rpb24gdHQoZSwgdCkge1xuICBjb25zdCByID0gQihlKSwgbiA9IEIodCksIG8gPSBNYXRoLm1heChyLmxlbmd0aCwgbi5sZW5ndGgpO1xuICBmb3IgKGxldCBzID0gMDsgcyA8IG87IHMgKz0gMSkge1xuICAgIGNvbnN0IGEgPSByW3NdIHx8IDAsIGMgPSBuW3NdIHx8IDA7XG4gICAgaWYgKGEgIT09IGMpXG4gICAgICByZXR1cm4gYSA+IGMgPyAxIDogLTE7XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBwKGUsIHQpIHtcbiAgcmV0dXJuIHR0KGUsIHQpIDw9IDA7XG59XG5mdW5jdGlvbiBIKGUsIHQsIHIpIHtcbiAgaWYgKHR5cGVvZiByID09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX29wZW5fbGlua1wiKSB7XG4gICAgICBpZiAodCA9PT0gXCJ0cnlfaW5zdGFudF92aWV3XCIpXG4gICAgICAgIHJldHVybiBwKFwiNi40XCIsIHIpO1xuICAgICAgaWYgKHQgPT09IFwidHJ5X2Jyb3dzZXJcIilcbiAgICAgICAgcmV0dXJuIHAoXCI3LjZcIiwgcik7XG4gICAgfVxuICAgIGlmIChlID09PSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiICYmIHQgPT09IFwiY29sb3JcIilcbiAgICAgIHJldHVybiBwKFwiNi45XCIsIHIpO1xuICAgIGlmIChlID09PSBcIndlYl9hcHBfY2xvc2VcIiAmJiB0ID09PSBcInJldHVybl9iYWNrXCIpXG4gICAgICByZXR1cm4gcChcIjcuNlwiLCByKTtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX3NldHVwX21haW5fYnV0dG9uXCIgJiYgdCA9PT0gXCJoYXNfc2hpbmVfZWZmZWN0XCIpXG4gICAgICByZXR1cm4gcChcIjcuMTBcIiwgcik7XG4gIH1cbiAgc3dpdGNoIChlKSB7XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl90Z19saW5rXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl9pbnZvaWNlXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfYmFja19idXR0b25cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfYmFja2dyb3VuZF9jb2xvclwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIjpcbiAgICBjYXNlIFwid2ViX2FwcF90cmlnZ2VyX2hhcHRpY19mZWVkYmFja1wiOlxuICAgICAgcmV0dXJuIHAoXCI2LjFcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfb3Blbl9wb3B1cFwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjJcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfY2xvc2Vfc2Nhbl9xcl9wb3B1cFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fc2Nhbl9xcl9wb3B1cFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlYWRfdGV4dF9mcm9tX2NsaXBib2FyZFwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjRcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc3dpdGNoX2lubGluZV9xdWVyeVwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjdcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfaW52b2tlX2N1c3RvbV9tZXRob2RcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3dyaXRlX2FjY2Vzc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfcGhvbmVcIjpcbiAgICAgIHJldHVybiBwKFwiNi45XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3NldHRpbmdzX2J1dHRvblwiOlxuICAgICAgcmV0dXJuIHAoXCI2LjEwXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X2dldF9pbmZvXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfb3Blbl9zZXR0aW5nc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3JlcXVlc3RfYWNjZXNzXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfcmVxdWVzdF9hdXRoXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfYmlvbWV0cnlfdXBkYXRlX3Rva2VuXCI6XG4gICAgICByZXR1cm4gcChcIjcuMlwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zd2lwZV9iZWhhdmlvclwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjdcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2hhcmVfdG9fc3RvcnlcIjpcbiAgICAgIHJldHVybiBwKFwiNy44XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3NlY29uZGFyeV9idXR0b25cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfYm90dG9tX2Jhcl9jb2xvclwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjEwXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3Rfc2FmZV9hcmVhXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF9jb250ZW50X3NhZmVfYXJlYVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfZnVsbHNjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2V4aXRfZnVsbHNjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldF9lbW9qaV9zdGF0dXNcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9hZGRfdG9faG9tZV9zY3JlZW5cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9jaGVja19ob21lX3NjcmVlblwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3JlcXVlc3RfZW1vamlfc3RhdHVzX2FjY2Vzc1wiOlxuICAgICAgcmV0dXJuIHAoXCI4LjBcIiwgdCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbXG4gICAgICAgIFwiaWZyYW1lX3JlYWR5XCIsXG4gICAgICAgIFwiaWZyYW1lX3dpbGxfcmVsb2FkXCIsXG4gICAgICAgIFwid2ViX2FwcF9jbG9zZVwiLFxuICAgICAgICBcIndlYl9hcHBfZGF0YV9zZW5kXCIsXG4gICAgICAgIFwid2ViX2FwcF9leHBhbmRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX29wZW5fbGlua1wiLFxuICAgICAgICBcIndlYl9hcHBfcmVhZHlcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlcXVlc3RfdGhlbWVcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlcXVlc3Rfdmlld3BvcnRcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3NldHVwX21haW5fYnV0dG9uXCIsXG4gICAgICAgIFwid2ViX2FwcF9zZXR1cF9jbG9zaW5nX2JlaGF2aW9yXCJcbiAgICAgIF0uaW5jbHVkZXMoZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGR0KGUsIHQpIHtcbiAgdCB8fCAodCA9IFwic3RyaWN0XCIpO1xuICBjb25zdCByID0gdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gdCA6IChuKSA9PiB7XG4gICAgY29uc3QgeyBtZXRob2Q6IG8sIHZlcnNpb246IHMgfSA9IG47XG4gICAgbGV0IGEsIGM7XG4gICAgaWYgKFwicGFyYW1cIiBpbiBuID8gKGEgPSBgUGFyYW1ldGVyIFwiJHtuLnBhcmFtfVwiIG9mIFwiJHtvfVwiIG1ldGhvZCBpcyB1bnN1cHBvcnRlZCBpbiBNaW5pIEFwcHMgdmVyc2lvbiAke3N9YCwgYyA9IEhlKSA6IChhID0gYE1ldGhvZCBcIiR7b31cIiBpcyB1bnN1cHBvcnRlZCBpbiBNaW5pIEFwcHMgdmVyc2lvbiAke3N9YCwgYyA9IEplKSwgdCA9PT0gXCJzdHJpY3RcIilcbiAgICAgIHRocm93IG5ldyBiKGMsIGEpO1xuICAgIHJldHVybiBjb25zb2xlLndhcm4oYSk7XG4gIH07XG4gIHJldHVybiAobiwgbykgPT4gSChuLCBlKSA/ICRlKG8pICYmIG4gPT09IFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCIgJiYgXCJjb2xvclwiIGluIG8gJiYgIUgobiwgXCJjb2xvclwiLCBlKSA/IHIoeyB2ZXJzaW9uOiBlLCBtZXRob2Q6IG4sIHBhcmFtOiBcImNvbG9yXCIgfSkgOiBwZShuLCBvKSA6IHIoeyB2ZXJzaW9uOiBlLCBtZXRob2Q6IG4gfSk7XG59XG5mdW5jdGlvbiBFdChlLCB0LCByLCBuKSB7XG4gIHJldHVybiBmZShcIndlYl9hcHBfaW52b2tlX2N1c3RvbV9tZXRob2RcIiwgXCJjdXN0b21fbWV0aG9kX2ludm9rZWRcIiwge1xuICAgIC4uLm4gfHwge30sXG4gICAgcGFyYW1zOiB7IG1ldGhvZDogZSwgcGFyYW1zOiB0LCByZXFfaWQ6IHIgfSxcbiAgICBjYXB0dXJlOiBldChyKVxuICB9KS50aGVuKCh7IHJlc3VsdDogbywgZXJyb3I6IHMgfSkgPT4ge1xuICAgIGlmIChzKVxuICAgICAgdGhyb3cgbmV3IGIoS2UsIHMpO1xuICAgIHJldHVybiBvO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHJ0KGUpIHtcbiAgZS51bnN1YkFsbCgpLCBlLnJlc2V0KCk7XG59XG5mdW5jdGlvbiB5dCgpIHtcbiAgdmFyIGU7XG4gIChlID0gTigpKSA9PSBudWxsIHx8IGUoKSwgW1xuICAgIC4uLk9iamVjdC52YWx1ZXModigpKSxcbiAgICB2LFxuICAgIEMsXG4gICAgTixcbiAgICB1ZSxcbiAgICBhZVxuICBdLmZvckVhY2gocnQpO1xufVxuZXhwb3J0IHtcbiAgYWUgYXMgJGRlYnVnLFxuICB1ZSBhcyAkdGFyZ2V0T3JpZ2luLFxuICB3IGFzIENhbmNlbGFibGVQcm9taXNlLFxuICByZSBhcyBFUlJfQUJPUlRFRCxcbiAgbmUgYXMgRVJSX0NBTkNFTEVELFxuICBLZSBhcyBFUlJfQ1VTVE9NX01FVEhPRF9FUlJfUkVTUE9OU0UsXG4gIEhlIGFzIEVSUl9NRVRIT0RfUEFSQU1FVEVSX1VOU1VQUE9SVEVELFxuICBKZSBhcyBFUlJfTUVUSE9EX1VOU1VQUE9SVEVELFxuICBCZSBhcyBFUlJfUkVUUklFVkVfTFBfRkFJTEVELFxuICBvZSBhcyBFUlJfVElNRURfT1VULFxuICBHZSBhcyBFUlJfVU5LTk9XTl9FTlYsXG4gIFMgYXMgRW5oYW5jZWRQcm9taXNlLFxuICBiIGFzIFR5cGVkRXJyb3IsXG4gIHRlIGFzIGFkZEV2ZW50TGlzdGVuZXIsXG4gIGN0IGFzIGNhbWVsVG9LZWJhYixcbiAgaXQgYXMgY2FtZWxUb1NuYWtlLFxuICBldCBhcyBjYXB0dXJlU2FtZVJlcSxcbiAgdHQgYXMgY29tcGFyZVZlcnNpb25zLFxuICBNIGFzIGNyZWF0ZUFib3J0RXJyb3IsXG4gIGsgYXMgY3JlYXRlQ2JDb2xsZWN0b3IsXG4gIGtlIGFzIGNyZWF0ZUxvZ2dlcixcbiAgZHQgYXMgY3JlYXRlUG9zdEV2ZW50LFxuICBMIGFzIGNyZWF0ZVR5cGVkRXJyb3JQcmVkaWNhdGUsXG4gIGJ0IGFzIGRlZmluZUV2ZW50SGFuZGxlcnMsXG4gIGZ0IGFzIGRlbGV0ZUNzc1ZhcixcbiAgeCBhcyBlbWl0TWluaUFwcHNFdmVudCxcbiAgeGUgYXMgZ2V0U3RvcmFnZVZhbHVlLFxuICBRIGFzIGhhc1dlYnZpZXdQcm94eSxcbiAgRXQgYXMgaW52b2tlQ3VzdG9tTWV0aG9kLFxuICBvdCBhcyBpc0Fib3J0RXJyb3IsXG4gIHN0IGFzIGlzQ2FuY2VsZWRFcnJvcixcbiAgTmUgYXMgaXNJZnJhbWUsXG4gIF90IGFzIGlzVE1BLFxuICBudCBhcyBpc1RpbWVvdXRFcnJvcixcbiAgbHQgYXMgbW9ja1RlbGVncmFtRW52LFxuICB3dCBhcyBvZmYsXG4gIEZlIGFzIG9uLFxuICBwZSBhcyBwb3N0RXZlbnQsXG4gIGd0IGFzIHJlbW92ZUV2ZW50SGFuZGxlcnMsXG4gIGZlIGFzIHJlcXVlc3QsXG4gIHl0IGFzIHJlc2V0UGFja2FnZVN0YXRlLFxuICBZZSBhcyByZXRyaWV2ZUxhdW5jaFBhcmFtcyxcbiAgcHQgYXMgc2V0Q3NzVmFyLFxuICBXZSBhcyBzZXRTdG9yYWdlVmFsdWUsXG4gIGF0IGFzIHNsZWVwLFxuICB1dCBhcyBzbmFrZVRvQ2FtZWwsXG4gIGh0IGFzIHN1YnNjcmliZSxcbiAgSCBhcyBzdXBwb3J0cyxcbiAgbXQgYXMgdW5zdWJzY3JpYmVcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js\n");

/***/ })

};
;