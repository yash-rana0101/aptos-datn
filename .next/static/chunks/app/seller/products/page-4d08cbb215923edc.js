(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[902],{4233:function(e,t,r){Promise.resolve().then(r.bind(r,7344))},8030:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var l=r(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,l.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:x,...u}=e;return(0,l.createElement)("svg",{ref:t,...a,width:s,height:s,stroke:r,strokeWidth:d?24*Number(n)/Number(s):n,className:i("lucide",c),...u},[...x.map(e=>{let[t,r]=e;return(0,l.createElement)(t,r)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let r=(0,l.forwardRef)((r,a)=>{let{className:d,...c}=r;return(0,l.createElement)(n,{ref:a,iconNode:t,className:i("lucide-".concat(s(e)),d),...c})});return r.displayName="".concat(e),r}},6780:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(8030).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3274:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(8030).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7344:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var l=r(7437),s=r(2265),i=r(2547),a=r(5984),n=r(7693),d=r(3274),c=r(6780),o=r(4697);let x=(0,r(8030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function u(){var e;let{isAuthenticated:t,isLoading:r}=(0,a.a)(),{account:u}=(0,n.Os)(),{data:g=[],isLoading:p}=(0,i.HY)(null==u?void 0:null===(e=u.address)||void 0===e?void 0:e.toString()),y=(0,i.gl)(),f=(0,i.vO)(),v=(0,i.HF)(),[j,N]=(0,s.useState)({title:"",price:"",description:"",quantity:"1",category:"",imageUrls:[]}),[w,C]=(0,s.useState)(null),[k,P]=(0,s.useState)(!1),[A,D]=(0,s.useState)(null),[U,S]=(0,s.useState)(!1),[Z,q]=(0,s.useState)(""),E=()=>{Z.trim()&&(N(e=>({...e,imageUrls:[...e.imageUrls,Z.trim()]})),q(""))},M=e=>{N(t=>({...t,imageUrls:t.imageUrls.filter((t,r)=>r!==e)}))},L=async e=>{if(e.preventDefault(),!u)return;let t=parseFloat(j.price),r=parseInt(j.quantity);if(!(!j.title.trim()||isNaN(t)||t<=0||isNaN(r))&&!(r<1)){S(!0);try{await y.mutateAsync({title:j.title.trim(),description:j.description.trim(),price:Math.floor(1e8*t),quantity:r,imageUrls:j.imageUrls.filter(e=>e.trim()),category:j.category.trim()||"General"}),N({title:"",price:"",description:"",quantity:"1",category:"",imageUrls:[]})}finally{S(!1)}}},z=(0,s.useMemo)(()=>({totalProducts:g.length,totalQuantity:0,totalValue:0}),[g]);return r||p?(0,l.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,l.jsx)(d.Z,{className:"w-12 h-12 text-[#C6D870] animate-spin"})}):(0,l.jsx)("div",{className:"min-h-screen bg-black py-8 px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Manage Products"}),(0,l.jsx)("p",{className:"text-gray-400",children:"Create and manage your product listings on the blockchain"})]}),(0,l.jsx)("div",{className:"mb-6 p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 text-blue-400 shrink-0 mt-0.5"}),(0,l.jsxs)("div",{className:"text-sm text-blue-400",children:[(0,l.jsx)("strong",{children:"Note:"})," This blockchain version uses image URLs. Upload your images to IPFS/Arweave first."]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"lg:col-span-1 p-6 rounded-lg border border-gray-700 bg-[#0b0b0b]/60",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Create Product"}),(0,l.jsxs)("form",{onSubmit:L,className:"flex flex-col gap-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{value:j.title,onChange:e=>N({...j,title:e.target.value}),placeholder:"Product title",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsx)("input",{value:j.price,onChange:e=>N({...j,price:e.target.value}),placeholder:"Price (APT)",type:"number",step:"0.0001",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"}),(0,l.jsx)("input",{value:j.quantity,onChange:e=>N({...j,quantity:e.target.value}),placeholder:"Qty",type:"number",min:"1",required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"})]}),(0,l.jsx)("input",{value:j.category,onChange:e=>N({...j,category:e.target.value}),placeholder:"Category",className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6"}),(0,l.jsx)("textarea",{value:j.description,onChange:e=>N({...j,description:e.target.value}),placeholder:"Description",className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6 h-24 resize-none"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{value:Z,onChange:e=>q(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),E()),placeholder:"Image URL",className:"flex-1 px-4 py-2 rounded-xl bg-white/4 text-white border border-white/6 text-sm"}),(0,l.jsx)("button",{type:"button",onClick:E,className:"px-4 py-2 bg-[#C6D870] text-black rounded-lg text-sm font-semibold",children:"Add"})]}),j.imageUrls.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-white/5 border border-white/6",children:[(0,l.jsx)("span",{className:"flex-1 text-xs text-gray-300 truncate",children:e}),(0,l.jsx)("button",{type:"button",onClick:()=>M(t),className:"text-red-400",children:(0,l.jsx)(o.Z,{className:"w-4 h-4"})})]},t))]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,l.jsxs)("div",{className:"p-3 rounded-xl bg-white/3 border border-white/6 text-center",children:[(0,l.jsx)("div",{className:"text-xs text-gray-300",children:"Items"}),(0,l.jsx)("div",{className:"text-lg font-bold text-white",children:z.totalProducts})]}),(0,l.jsxs)("div",{className:"p-3 rounded-xl bg-white/3 border border-white/6 text-center",children:[(0,l.jsx)("div",{className:"text-xs text-gray-300",children:"Qty"}),(0,l.jsx)("div",{className:"text-lg font-bold text-white",children:z.totalQuantity})]}),(0,l.jsxs)("div",{className:"p-3 rounded-xl bg-white/3 border border-white/6 text-center",children:[(0,l.jsx)("div",{className:"text-xs text-gray-300",children:"Value"}),(0,l.jsxs)("div",{className:"text-lg font-bold text-white",children:[z.totalValue," APT"]})]})]}),(0,l.jsx)("button",{type:"submit",disabled:U||y.isPending,className:"px-6 py-3 rounded-2xl bg-linear-to-r from-[#C6D870] to-[#B5C760] text-black font-semibold disabled:opacity-50",children:U?"Creating...":"Create Product"})]})]}),(0,l.jsxs)("div",{className:"lg:col-span-2 p-6 rounded-lg border border-gray-700 bg-[#0b0b0b]/60",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Your Products"}),p?(0,l.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,l.jsx)(d.Z,{className:"w-8 h-8 text-[#C6D870] animate-spin"})}):0===g.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)(x,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-400",children:"No products yet!"})]}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(e=>(0,l.jsx)(m,{productAddress:e,onEdit:()=>{C(e),P(!0)},onDelete:()=>D(e)},e))})]})]}),k&&w&&(0,l.jsx)(h,{productAddress:w,onClose:()=>{P(!1),C(null)},updateMutation:f}),A&&(0,l.jsx)(b,{productAddress:A,onClose:()=>D(null),deleteMutation:v})]})})}function m(e){let{productAddress:t,onEdit:r,onDelete:s}=e,{data:a,isLoading:n}=(0,i.iB)(t);return n?(0,l.jsx)("div",{className:"p-4 rounded-xl border border-gray-800 bg-[#0b0b0b] flex items-center justify-center h-64",children:(0,l.jsx)(d.Z,{className:"w-8 h-8 text-[#C6D870] animate-spin"})}):a?(0,l.jsxs)("div",{className:"p-4 rounded-xl border border-gray-800 bg-linear-to-br from-[#0b0b0b] via-[#0b0b0b] to-[#1a1a1a] flex flex-col backdrop-blur-sm hover:border-[#C6D870]/30 transition-all",children:[(0,l.jsxs)("div",{className:"h-48 w-full bg-gray-900 rounded-lg overflow-hidden flex items-center justify-center relative",children:[a.imageUrls&&a.imageUrls.length>0?(0,l.jsx)("img",{src:a.imageUrls[0],alt:a.title,className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"text-gray-600",children:"No image"}),(0,l.jsx)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full text-xs font-semibold ".concat(a.isAvailable?"bg-green-500/80":"bg-red-500/80"," text-white"),children:a.isAvailable?"Available":"Unavailable"})]}),(0,l.jsxs)("div",{className:"mt-4 flex-1 space-y-2",children:[(0,l.jsx)("div",{className:"text-white font-semibold text-lg",children:a.title}),(0,l.jsx)("div",{className:"text-xs text-gray-400 uppercase",children:a.category}),a.description&&(0,l.jsx)("p",{className:"text-sm text-gray-300 line-clamp-2",children:a.description}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,l.jsxs)("div",{className:"text-lg text-[#C6D870] font-bold",children:[(a.price/1e8).toFixed(4)," APT"]}),(0,l.jsxs)("div",{className:"text-sm text-gray-400",children:["Qty: ",(0,l.jsx)("span",{className:"text-white font-semibold",children:a.quantity})]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["Sold: ",a.soldQuantity," units"]})]}),(0,l.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,l.jsx)("button",{onClick:r,className:"flex-1 px-3 py-2 text-sm border border-[#C6D870] text-[#C6D870] rounded-lg hover:bg-[#C6D870]/10",children:"Edit"}),(0,l.jsx)("button",{onClick:s,className:"flex-1 px-3 py-2 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}):(0,l.jsx)("div",{className:"p-4 rounded-xl border border-gray-800 bg-[#0b0b0b]",children:(0,l.jsxs)("p",{className:"text-gray-400 text-sm",children:["Product #",t.slice(0,8),"..."]})})}function h(e){let{productAddress:t,onClose:r,updateMutation:a}=e,{data:n}=(0,i.iB)(t),[d,c]=(0,s.useState)({title:"",price:"",description:"",category:"",imageUrls:[]});(0,s.useEffect)(()=>{n&&c({title:n.title,price:(n.price/1e8).toString(),description:n.description,category:n.category,imageUrls:n.imageUrls})},[n]);let o=async e=>{e.preventDefault();let l=parseFloat(d.price);if(!isNaN(l)&&!(l<=0))try{await a.mutateAsync({productAddress:t,title:d.title.trim(),description:d.description.trim(),price:Math.floor(1e8*l),imageUrls:d.imageUrls,category:d.category.trim()}),r()}catch(e){console.error(e)}};return n?(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-[#0b0b0b] border border-gray-800 rounded-2xl p-6 w-full max-w-2xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Edit Product"}),(0,l.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white text-2xl"})]}),(0,l.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,l.jsx)("input",{value:d.title,onChange:e=>c({...d,title:e.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6",placeholder:"Title"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("input",{type:"number",step:"0.0001",value:d.price,onChange:e=>c({...d,price:e.target.value}),required:!0,className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6",placeholder:"Price"}),(0,l.jsx)("input",{value:d.category,onChange:e=>c({...d,category:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6",placeholder:"Category"})]}),(0,l.jsx)("textarea",{value:d.description,onChange:e=>c({...d,description:e.target.value}),className:"w-full px-4 py-3 rounded-xl bg-white/4 text-white border border-white/6 h-28 resize-none",placeholder:"Description"}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-6 py-3 rounded-xl border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:a.isPending,className:"flex-1 px-6 py-3 rounded-xl bg-linear-to-r from-[#C6D870] to-[#B5C760] text-black font-semibold disabled:opacity-50",children:a.isPending?"Saving...":"Save Changes"})]})]})]})}):null}function b(e){let{productAddress:t,onClose:r,deleteMutation:s}=e,{data:a}=(0,i.iB)(t),n=async()=>{try{await s.mutateAsync(t),r()}catch(e){console.error(e)}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-[#0b0b0b] border border-gray-800 rounded-2xl p-6 w-full max-w-md",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Confirm Delete"}),(0,l.jsxs)("p",{className:"text-gray-300 mb-6",children:["Delete ",(0,l.jsx)("span",{className:"text-[#C6D870] font-semibold",children:(null==a?void 0:a.title)||"#".concat(t.slice(0,8),"...")}),"?"]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:r,className:"flex-1 px-6 py-3 rounded-xl border border-gray-700 text-gray-300 hover:bg-gray-800",children:"Cancel"}),(0,l.jsx)("button",{onClick:n,disabled:s.isPending,className:"flex-1 px-6 py-3 rounded-xl bg-red-600 text-white font-semibold hover:bg-red-700 disabled:opacity-50",children:s.isPending?"Deleting...":"Delete"})]})]})})}},5984:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return d},a:function(){return c}});var l=r(7437),s=r(2265),i=r(7693),a=r(4516);let n=(0,s.createContext)(void 0);function d(e){var t;let{children:r}=e,{account:s,connected:d}=(0,i.Os)(),c=null==s?void 0:null===(t=s.address)||void 0===t?void 0:t.toString(),{data:o,isLoading:x}=(0,a.Gr)(c);return(0,l.jsx)(n.Provider,{value:{address:c||null,isConnected:d,isLoading:x,isAuthenticated:d&&!!o,userProfile:o||null},children:r})}function c(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[664,213,609,547,971,23,744],function(){return e(e.s=4233)}),_N_E=e.O()}]);